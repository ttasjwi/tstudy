# 데이터베이스 설계 규칙 (1) 한 칸에는 한 가지 정보만 들어가도록 만들어라

---

### 1. 한 칸에 여러 정보가 들어가는 경우
**users (사용자)**

| id(PK) | 이름 | 이메일 |
| --- | --- | --- |
| 1 | 땃쥐 | `abc@gmail.com,def@naver.com,ghi@kakao.com`|
| 2 | 땃고양이 | `123@gmail.com,456@naver.com,456@naver.com` |

- 이 예시 테이블, 'users' 의 이메일 칼럼에는 사용자 한 명이 가진 여러 개의 이메일들을 콤마를 통해 나열하고 있다.
- 문제점
    - 조회를 통해 매번 사용자 이메일들을 조회하더라도, 콤마를 통해 데이터를 분리시키는 작업을 해야 한다.
    - 또 이 과정에서 실수로 데이터를 중복해서 삽입할 수도 있다.

---

### 2. 별도의 테이블 분리

**users(사용자)**

| id(PK) | 이름 |
| --- | --- |
| 1 | 땃쥐 |
| 2 | 땃고양이 |

**emails(이메일)**

| id(PK) | email |
| --- | --- |
| 1 | `abc@gmail.com` |
| 2 | `def@naver.com` |
| 3 | `ghi@kakao.com` |
| 4 | `123@gmail.com` |
| 5 | `456@naver.com` |

- 여기까지 하면 한 칸에 몰려있던 이메일 정보들이 분리됐지만 누구의 이메일인지 알 방법이 없다.
- 이메일 소유자에 관한 정보를 관리하는 칼럼이 필요하다.

---

### 3. 외래키 추가

**users(사용자)**

| id(PK) | 이름 | email(FK) |
| --- | --- | --- |
| 1 | 땃쥐 | 1,2,3 |
| 2 | 땃고양이 | 4,5 |

**emails(이메일)**

| id(PK) | email |
| --- | --- |
| 1 | `abc@gmail.com` |
| 2 | `def@naver.com` |
| 3 | `ghi@kakao.com` |
| 4 | `123@gmail.com` |
| 5 | `456@naver.com` |

- users 테이블에 email 칼럼을 두어 소유한 이메일이 무엇인지 외래키 목록을 둬 봤다.
- 하지만 1에서의 문제가 남아있다. 한 칸에 하나의 정보만 있어야 한다.

---

### 4. 외래키를 1:N의 N쪽에 두기
**users(사용자)**

| id(PK) | 이름 |
| --- | --- |
| 1 | 땃쥐 |
| 2 | 땃고양이 |

**emails(이메일)**

| id(PK) | email | user_id(FK) |
| --- | --- | --- |
| 1 | `abc@gmail.com` | 1 |
| 2 | `def@naver.com` | 1 |
| 3 | `ghi@kakao.com` | 1 |
| 4 | `123@gmail.com` | 2 |
| 5 | `456@naver.com` | 2 |

- 1:N의 다(N)쪽에 해당하는 emails 테이블에, 부모가 되는 users 테이블의 FK 칼럼을 삽입했다.
- emails 테이블의 한 행에서 FK 를 통해 어느 사용자(users)의 이메일인지 확인할 수 있게 됐다.
- 또, 한 칸에 하나의 정보만 들어가야한다는 규칙을 준수한다.

---

### 5. 전문용어

- 이 규칙을 지킨 설계를 보고 데이터베이스 설계 이론에서는 제 1 정규형(1NF) 이라고 부른다.

---
