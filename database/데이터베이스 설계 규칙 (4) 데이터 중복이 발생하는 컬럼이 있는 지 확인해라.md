# 데이터베이스 설계 규칙 (4) 데이터 중복이 발생하는 컬럼이 있는 지 확인해라

---

## 1. DB 설계의 핵심 원칙은 '중복 없애기'
- 테이블에서 중복이 발생하면 이상현상이 발생한다.
- 이상현상을 해결하기 위해 만들어낸 DB 설계 방법이 '정규화(Normalization)' 이다.

---

## 2. 데이터 중복이 발생하는 지 시뮬레이션을 돌려봐라.

### 2.1 개요
- 중복이 발생하지는 않는 지 초안으로 구성된 테이블에서 데이터 중복이 발생하는 구성인지 임의로 데이터를 넣어봐야 한다. 
- 여러 데이터를 넣어보고, 같은 칼럼에 여러개의 값을 넣어보고, 부분적으로 수정하였을 때 이상현상이 발생하는 지 확인해본다.
- **중복이라 판단되면 테이블을 별도로 분리한다.**


### 2.2 예시
**posts(게시글)**

| id | 제목 | **내용** | **작성자** |
| --- | --- | --- | --- |
| 1 | 땃쥐는 멋있어 | 내용1 | 땃쥐 |
| 2 | 땃쥐는 맛있어 | 내용2 | 땃고양이 |
| 3 | 땃고양이 무서워 | 내용3 | 땃쥐 |

- 게시글 1,3 은 각각 작성자가 ‘땃쥐’ 로 같다.

| id | 제목 | **내용** | **작성자** |
| --- | --- | --- | --- |
| 1 | 땃쥐는 멋있어 | 내용1 | 땃쥐(갱신이상) |
| 2 | 땃쥐는 맛있어 | 내용2 | 땃고양이 |
| 3 | 땃고양이 무서워 | 내용3 | 땃사자 |

- 그런데 땃쥐 사용자가 닉네임을 ‘땃사자’로 바꾼다고 생각해보자. 그러면 ‘땃쥐’ 작성자의 작성글 행들을 찾아 모두 작성자 명을 ‘땃사자’로 바꿔야한다.
- 이 과정에서 실수가 발생해서 부분적인 행만 바뀌어지는 경우, 갱신이상이다.
- 작성자 정보를 별도의 테이블로 분리하여, 통합적으로 관리할 수 있도록 해야한다.

---

## 3. 테이블을 분리하여 데이터 중복을 제거하라
**users**

| id | 이름   |
|----|------|
| 1  | 땃쥐   |
| 2  | 땃고양이 |

**posts**

| id | 제목       | **내용** | **작성자Id(FK)** |
|----|----------|--------|---------------|
| 1  | 땃쥐는 멋있어  | 내용1    | 1             |
| 2  | 땃쥐는 맛있어  | 내용2    | 2             |
| 3  | 땃고양이 무서워 | 내용3    | 1             |

  - 테이블을 별도롤 만들고 외래키로 작성자를 연결해줬더니 데이터 중복 문제가 사라졌다.
  - ‘땃쥐’ 사용자가 이름을 ‘땃사자’로 바꾸더라도, posts 테이블의 모든 칼럼을 변경할 필요가 없다.
  - **‘FK의 중복’은 중복이라고 판단하지 않는다.**

---
